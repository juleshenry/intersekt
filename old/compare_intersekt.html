<!DOCTYPE html>
<html>
<head>
    <title>Function Timing Comparison</title>
    <script type="module" src="wintersekt.js"></script>
    <script>
        let ciel = 10000000;
        function legacyApi() {
            console.log('Called legacy API, ', ciel, ' times.');
            let o = 0
            for (let i = 0; i < ciel; i++) {
                i + 1 - i;
            }
        }
        function wasmCall() {
            console.log('Called Wasm API');
            (async () => {
                // Fetch the WebAssembly module
                const response = await fetch('hello-world-add.wasm');
                const bytes = await response.arrayBuffer();
                const { instance } = await WebAssembly.instantiate(bytes);
                const addTwo = instance.exports.add;
                let o = 0
                for (let i = 0; i < ciel; i++) {
                    o = addTwo(i, i) % 10;
                }
            })();
        }
        function compareTiming() {
            var startTime = performance.now();
            legacyApi();
            var legacyApiTime = performance.now() - startTime;

            startTime = performance.now();
            wasmCall();
            var wasmCallTime = performance.now() - startTime;
            
            let result = "<p>Calling an API: ";
            result += legacyApiTime.toFixed(4);
            result += " ms</p><p>WASM Call: ";
            result += wasmCallTime.toFixed(4) + " ns.</p>";
            document.getElementById("timingResult").innerHTML = result;
        }
        
        function compareIntersekt() {
            var startTime = performance.now();
            let a=[[0,0],[1,1],[1,0],[0,0]].slice(0, -1),
                b=[[0,0],[.5,.5],[.5,0],[0,0]].slice(0, -1);
            let i = wintersekt(b,a);
            console.log(i,'!')
        }
    </script>
</head>
<body>
    <h2>한국대중음악명반 노브레인 (NoBrain) 1집 대조선 펑크 노브레인 청년폭도맹진가</h2>
    <button onclick=compareIntersekt()>Wintersekt</button>
    <!-- <button onclick=compareTiming()>Compare Timing For Real</button>    -->
    <p id="timingResult"></p>
</body>
</html>
